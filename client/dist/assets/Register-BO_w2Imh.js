import{u as $,r as a,a as z,j as e,s as H}from"./index-D9hGhxv1.js";import{f as u,B as h,C as G,a as J,b as K,c as Q,d as V,L as r,I as l,e as W}from"./createLucideIcon-DPOfEtN0.js";import{A as X}from"./arrow-left-BRXzCr7n.js";const Y=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],Z=u("cloud-upload",Y);const ee=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],L=u("eye-off",ee);const se=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],E=u("eye",se);function ne(){const i=$(),[p,T]=a.useState(""),[x,q]=a.useState(""),[n,I]=a.useState(""),[g,M]=a.useState(""),[c,U]=a.useState(""),[j,_]=a.useState(""),[f,v]=a.useState(null),[w,A]=a.useState(!1),[y,R]=a.useState(!1),[b,d]=a.useState(""),[N,C]=a.useState(!1),{setUser:k,setToken:S}=z();function B(){if(typeof window<"u"&&window.history.length>1){i(-1);return}i("/")}function D(s){const o=s.target.files&&s.target.files[0];if(o){const m=URL.createObjectURL(o);v(m)}else v(null)}async function O(s){if(s.preventDefault(),d(""),c!==j){d("Passwords do not match");return}if(!n||!c){d("Email and password are required");return}C(!0);try{const o=/admin/i.test(n)?"admin":"employee",m=n?n.split("@")[0]:void 0,t=await H({employeeId:m,email:n,password:c,role:o,name:x,company:p,phone:g}),P=t?.user??t?.data?.user??t,F=t?.token??t?.data?.token??t?.accessToken??t?.data?.accessToken??null;F&&S&&S(F),P&&k&&k(P),i("/employees")}catch(o){d(o.message||"Registration failed")}finally{C(!1)}}return e.jsx("div",{className:"min-h-screen bg-background text-foreground",children:e.jsx("div",{className:"container mx-auto flex min-h-screen items-center justify-center px-6 py-12",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs(h,{type:"button",variant:"ghost",className:"mb-3",onClick:B,children:[e.jsx(X,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(G,{className:"w-full p-0 shadow-none",children:e.jsxs("div",{className:"p-0",children:[e.jsxs(J,{className:"border-border border-b p-4 [.border-b]:pb-4",children:[e.jsx(K,{children:"Create account"}),e.jsx(Q,{children:"Fill the form to create your account and start reporting incidents."})]}),e.jsxs(V,{className:"space-y-5 p-4",children:[e.jsxs("form",{onSubmit:O,children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(r,{htmlFor:"company",children:"Company Name"}),e.jsx(l,{id:"company",value:p,onChange:s=>T(s.target.value),placeholder:"Company name"})]}),e.jsxs("div",{className:"w-20 text-center",children:[e.jsx(r,{children:"Logo"}),e.jsxs("label",{className:"group relative inline-flex h-12 w-12 cursor-pointer items-center justify-center rounded border border-dashed p-2",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:D}),f?e.jsx("img",{src:f,alt:"logo preview",className:"h-10 w-10 rounded object-cover"}):e.jsx(Z,{className:"h-6 w-6 text-muted-foreground"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"name",children:"Name"}),e.jsx(l,{id:"name",value:x,onChange:s=>q(s.target.value),placeholder:"Full name"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"email",children:"Email"}),e.jsx(l,{id:"email",type:"email",value:n,onChange:s=>I(s.target.value),placeholder:"name@example.com",required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"phone",children:"Phone"}),e.jsx(l,{id:"phone",value:g,onChange:s=>M(s.target.value),placeholder:"Phone number"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{id:"password",type:w?"text":"password",value:c,onChange:s=>U(s.target.value),placeholder:"••••••••",required:!0,autoComplete:"new-password"}),e.jsx("button",{type:"button",className:"absolute right-2 top-2 text-sm",onClick:()=>A(s=>!s),"aria-label":"Toggle password visibility",children:w?e.jsx(L,{className:"h-4 w-4"}):e.jsx(E,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"confirm",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{id:"confirm",type:y?"text":"password",value:j,onChange:s=>_(s.target.value),placeholder:"Confirm password",required:!0,autoComplete:"new-password"}),e.jsx("button",{type:"button",className:"absolute right-2 top-2 text-sm",onClick:()=>R(s=>!s),"aria-label":"Toggle confirm password",children:y?e.jsx(L,{className:"h-4 w-4"}):e.jsx(E,{className:"h-4 w-4"})})]})]}),b&&e.jsx("div",{className:"rounded-md border border-destructive/30 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:b})]}),e.jsx(W,{className:"border-border mt-4 border-t p-0 pt-4",children:e.jsx(h,{className:"w-full",type:"submit",disabled:N,children:N?"Creating account…":"Sign Up"})})]}),e.jsx("div",{className:"text-center text-sm",children:e.jsx(h,{type:"button",variant:"link",className:"w-full",onClick:()=>i("/login"),children:"Already have an account? Sign In"})})]})]})})]})})})}export{ne as default};
