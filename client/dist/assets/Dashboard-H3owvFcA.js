import{u as v,a as y,r as i,j as e}from"./index-D9hGhxv1.js";import{N as b}from"./Navbar-VGw1GWjM.js";import{B as g,L as S,I as w}from"./createLucideIcon-DPOfEtN0.js";function A(){const h=v(),{user:o,setUser:d}=y(),[l,m]=i.useState(""),[c,f]=i.useState("");function u(s){const t=String(s??"").trim();f(t),m("")}const[r,p]=i.useState(()=>{try{const s=localStorage.getItem("si_employees");if(s){const t=JSON.parse(s);return Array.isArray(t)?t:[]}}catch{}return[]});i.useEffect(()=>{try{localStorage.setItem("si_employees",JSON.stringify(r))}catch{}},[r]);function j(s){p(t=>t.map(a=>{if(a.id!==s)return a;const n=a.status==="present"?"absent":"present",N=n==="present"?new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return a.isCurrent&&d&&d(x=>x?{...x,status:n}:{status:n}),{...a,status:n,since:N}}))}return e.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[e.jsx(b,{}),e.jsxs("main",{className:"container mx-auto px-6 py-10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:"/logo.png",alt:"logo",className:"h-10"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Employees"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Welcome",o?.email?`, ${o.email}`:""," — manage attendance and profiles."]})]}),e.jsx("div",{className:"ml-6 flex items-center gap-2"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"bg-pink-400 text-white",children:"NEW"}),e.jsxs("div",{className:"w-56",children:[e.jsx(S,{htmlFor:"search",className:"sr-only",children:"Search"}),e.jsx(w,{id:"search",placeholder:c?`Search: ${c}`:"Search",value:l,onChange:s=>m(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),u(s.currentTarget.value))},onBlur:()=>{l!==""&&u(l)}})]})]})]}),e.jsx("div",{className:"mt-6 grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:r.length===0?e.jsx("div",{className:"col-span-full rounded border bg-card p-6 text-sm text-muted-foreground",children:"No employees found."}):r.filter(s=>s.name.toLowerCase().includes(c.toLowerCase())).map(s=>e.jsxs("div",{className:"rounded border p-4 bg-card cursor-pointer",onClick:()=>h(`/employees/${s.id}`),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-none bg-gray-200 flex items-center justify-center text-xl",children:s.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:s.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Employee"})]})]}),e.jsx("div",{children:e.jsx("span",{className:`inline-block h-3 w-3 rounded-full ${s.status==="present"?"bg-green-500":s.status==="leave"?"bg-yellow-400":"bg-red-500"}`})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Since: ",s.since||"—"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(g,{size:"sm",onClick:t=>{t.stopPropagation(),j(s.id)},children:s.status==="present"?"Check Out":"Check In"})})]})]},s.id))})]})]})}export{A as default};
